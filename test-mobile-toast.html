<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Toast Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Mobile-First Toast System Test Styles */
        .safe-area-inset {
            padding-bottom: env(safe-area-inset-bottom);
            padding-top: env(safe-area-inset-top);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }

        .toast-shadow-mobile {
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.25),
                0 20px 25px -5px rgba(0, 0, 0, 0.1),
                0 10px 10px -5px rgba(0, 0, 0, 0.04),
                0 0 0 1px rgba(0, 0, 0, 0.05);
        }

        .toast-no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }

        @keyframes slide-in-right {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .animate-slide-in-right {
            animation: slide-in-right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @media (max-width: 640px) {
            .toast-close-button {
                min-width: 44px;
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 min-h-screen">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-8 text-center">Mobile Toast System Test</h1>
        
        <div class="space-y-4 max-w-md mx-auto">
            <button onclick="showErrorToast()" class="w-full bg-red-500 text-white p-4 rounded-lg font-semibold">
                Test Error Toast (Deletion Failed)
            </button>
            
            <button onclick="showWarningToast()" class="w-full bg-yellow-500 text-white p-4 rounded-lg font-semibold">
                Test Warning Toast (Cannot Delete)
            </button>
            
            <button onclick="showSuccessToast()" class="w-full bg-green-500 text-white p-4 rounded-lg font-semibold">
                Test Success Toast
            </button>
            
            <button onclick="showLongErrorToast()" class="w-full bg-red-700 text-white p-4 rounded-lg font-semibold">
                Test Long Error Message
            </button>
        </div>
        
        <div class="mt-8 text-center text-sm text-gray-600">
            <p>Test on different screen sizes:</p>
            <p>📱 Mobile (320px - 640px)</p>
            <p>📱 Tablet (640px - 1024px)</p>
            <p>💻 Desktop (1024px+)</p>
        </div>
    </div>

    <!-- Mobile-First Toast Container -->
    <div class="toast-container fixed z-[10000] safe-area-inset">
        <!-- Mobile: Bottom positioned, full width with margin -->
        <div id="mobile-toasts" class="sm:hidden fixed inset-x-4 bottom-4 space-y-3 pointer-events-none">
        </div>

        <!-- Desktop: Top-right positioned, stacked -->
        <div id="desktop-toasts" class="hidden sm:flex fixed top-4 right-4 flex-col gap-3 max-w-sm pointer-events-none">
        </div>
    </div>

    <script>
        let toastId = 0;

        function createToast(type, title, message, variant = 'mobile') {
            const id = ++toastId;
            const isMobile = window.innerWidth < 640;
            const container = isMobile ? document.getElementById('mobile-toasts') : document.getElementById('desktop-toasts');
            
            const colors = {
                error: 'bg-red-50 border-red-200 text-red-800',
                warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',
                success: 'bg-green-50 border-green-200 text-green-800'
            };

            const icons = {
                error: '⚠️',
                warning: '⚠️',
                success: '✅'
            };

            const mobileStyles = isMobile 
                ? 'p-5 rounded-2xl text-base min-h-[80px] toast-shadow-mobile' 
                : 'p-4 rounded-lg text-sm';

            const toast = document.createElement('div');
            toast.className = `pointer-events-auto relative w-full flex items-start gap-4 ${mobileStyles} shadow-lg border transition-all duration-300 ease-in-out transform toast-no-select animate-slide-in-right ${colors[type]}`;
            
            toast.innerHTML = `
                <div class="flex-shrink-0 ${isMobile ? 'mt-1' : 'mt-0.5'}">
                    <span class="${isMobile ? 'text-2xl' : 'text-lg'}">${icons[type]}</span>
                </div>
                
                <div class="flex-1 min-w-0">
                    <div class="${isMobile ? 'font-semibold text-base mb-2' : 'font-medium text-sm mb-1'}">${title}</div>
                    <div class="${isMobile ? 'text-base leading-relaxed' : 'text-sm leading-relaxed'}">${message}</div>
                </div>
                
                <button onclick="removeToast(${id})" class="flex-shrink-0 ml-2 ${isMobile ? 'p-2' : 'p-1'} rounded-md hover:bg-black/5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current transition-colors toast-close-button" aria-label="Dismiss notification">
                    <span class="${isMobile ? 'text-xl' : 'text-base'}">×</span>
                </button>
            `;

            toast.id = `toast-${id}`;
            container.appendChild(toast);

            // Auto-remove after 12 seconds
            setTimeout(() => removeToast(id), 12000);
        }

        function removeToast(id) {
            const toast = document.getElementById(`toast-${id}`);
            if (toast) {
                toast.style.transform = 'translateX(100%)';
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }
        }

        function showErrorToast() {
            createToast('error', 'Deletion Failed', 'Failed to delete bread type. Please check your connection and try again.');
        }

        function showWarningToast() {
            createToast('warning', 'Cannot Delete Bread Type', 'This bread type has sales records. These records are needed for financial reporting.');
        }

        function showSuccessToast() {
            createToast('success', 'Success', 'Bread type updated successfully!');
        }

        function showLongErrorToast() {
            createToast('error', 'Cannot Delete Bread Type', 'Cannot delete this bread type as it has historical batch records. These records are needed for reporting and auditing purposes. Please archive the bread type instead of deleting it to maintain your business data integrity.');
        }

        // Update toast containers on window resize
        window.addEventListener('resize', () => {
            const toasts = document.querySelectorAll('[id^="toast-"]');
            toasts.forEach(toast => {
                removeToast(toast.id.replace('toast-', ''));
            });
        });
    </script>
</body>
</html>